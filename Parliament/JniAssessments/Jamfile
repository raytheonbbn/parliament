# Parliament is licensed under the BSD License from the Open Source
# Initiative, http://www.opensource.org/licenses/bsd-license.php
#
# Copyright (c) 2001-2009, BBN Technologies, Inc.
# All rights reserved.

import make ;
import notfile ;

project /KB/JniAssessments ;

explicit RunJniAssessments ;
notfile RunJniAssessments : @RunJniAssessments : JniAssessments ;
rule RunJniAssessments
{
}
actions RunJniAssessments
{
	java -cp $(>:D)/../../../.. -Djava.library.path=$(>:D) com.bbn.parliament.core.jni.JniAssessments > ./results.csv
}

lib JniAssessments
	:	[ glob *.cpp ]
		/site-config//JavaJNI
	:	<include>.
		<include>../KbCore
		<define>_REENTRANT
		<visibility>hidden
		<threading>multi
		<implicit-dependency>com_bbn_parliament_core_jni_JniAssessments.h
	:	# default build
	:	<include>.
		<define>_REENTRANT
	;

explicit com_bbn_parliament_core_jni_JniAssessments.h ;
make com_bbn_parliament_core_jni_JniAssessments.h : [ glob-tree *.java ] : @CompileJava ;
actions CompileJava
{
	ECHO "cp:" $(<:D) ;
	javac -Xlint:all -d $(<:D) -h $(<:D) $(>)
}
